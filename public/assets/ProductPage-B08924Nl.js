var gt=e=>{throw TypeError(e)};var st=(e,t,r)=>t.has(e)||gt("Cannot "+r);var F=(e,t,r)=>(st(e,t,"read from private field"),r?r.call(e):t.get(e)),Ae=(e,t,r)=>t.has(e)?gt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),we=(e,t,r,n)=>(st(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ee=(e,t,r)=>(st(e,t,"access private method"),r);import{S as er,s as tr,q as yt,v as rr,x as nr,y as D,z as qe,A as sr,l as ee,B as ir,C as kt,D as or,E as lr,G as ar,k as X,u as ie,H as se,I as ur,J as bt,K as I,w as Tt,L as cr,M as dr,N as fr,O as vr,P as mr,p as We,d as ut,c as J,a as y,n as ct,t as ke,Q as Mt,o as Z,_ as dt,T as pr,U as hr,V as $e,W as Ot,X as gr,j as yr,f as Fe,Y as je,F as Ue,r as it,Z as Vt,$ as br,a0 as Or,i as St}from"./index-BlIQCK7n.js";import{u as Vr,g as Sr,a as Ar}from"./getProductsImageAction-CPdF-KK5.js";var ce,de,q,oe,le,Le,at,Nt,wr=(Nt=class extends er{constructor(t,r){super();Ae(this,le);Ae(this,ce);Ae(this,de);Ae(this,q);Ae(this,oe);we(this,ce,t),this.setOptions(r),this.bindMethods(),Ee(this,le,Le).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var n;const r=this.options;this.options=F(this,ce).defaultMutationOptions(t),tr(this.options,r)||F(this,ce).getMutationCache().notify({type:"observerOptionsUpdated",mutation:F(this,q),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&yt(r.mutationKey)!==yt(this.options.mutationKey)?this.reset():((n=F(this,q))==null?void 0:n.state.status)==="pending"&&F(this,q).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=F(this,q))==null||t.removeObserver(this)}onMutationUpdate(t){Ee(this,le,Le).call(this),Ee(this,le,at).call(this,t)}getCurrentResult(){return F(this,de)}reset(){var t;(t=F(this,q))==null||t.removeObserver(this),we(this,q,void 0),Ee(this,le,Le).call(this),Ee(this,le,at).call(this)}mutate(t,r){var n;return we(this,oe,r),(n=F(this,q))==null||n.removeObserver(this),we(this,q,F(this,ce).getMutationCache().build(F(this,ce),this.options)),F(this,q).addObserver(this),F(this,q).execute(t)}},ce=new WeakMap,de=new WeakMap,q=new WeakMap,oe=new WeakMap,le=new WeakSet,Le=function(){var r;const t=((r=F(this,q))==null?void 0:r.state)??rr();we(this,de,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},at=function(t){nr.batch(()=>{var r,n,l,o,f,h,u,c;if(F(this,oe)&&this.hasListeners()){const O=F(this,de).variables,A=F(this,de).context;(t==null?void 0:t.type)==="success"?((n=(r=F(this,oe)).onSuccess)==null||n.call(r,t.data,O,A),(o=(l=F(this,oe)).onSettled)==null||o.call(l,t.data,null,O,A)):(t==null?void 0:t.type)==="error"&&((h=(f=F(this,oe)).onError)==null||h.call(f,t.error,O,A),(c=(u=F(this,oe)).onSettled)==null||c.call(u,void 0,t.error,O,A))}this.listeners.forEach(O=>{O(F(this,de))})})},Nt);function Er(e,t){const r=Vr(),n=D(()=>r.defaultMutationOptions(or(e))),l=new wr(r,n.value),o=qe(l.getCurrentResult()),f=l.subscribe(c=>{sr(o,c)}),h=(c,O)=>{l.mutate(c,O).catch(()=>{})};ee(n,()=>{l.setOptions(n.value)}),lr(()=>{f()});const u=ir(kt(o));return ee(()=>o.error,c=>{if(c&&ar(n.value.throwOnError,[c]))throw c}),{...u,mutate:h,mutateAsync:o.mutate,reset:o.reset}}/**
  * vee-validate v4.13.2
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function x(e){return typeof e=="function"}function Ie(e){return e==null}const Ce=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function ft(e){return Number(e)>=0}function jr(e){return typeof e=="object"&&e!==null}function Ir(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function At(e){if(!jr(e)||Ir(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Te(e,t){return Object.keys(t).forEach(r=>{if(At(t[r])&&At(e[r])){e[r]||(e[r]={}),Te(e[r],t[r]);return}e[r]=t[r]}),e}function ze(e){const t=e.split(".");if(!t.length)return"";let r=String(t[0]);for(let n=1;n<t.length;n++){if(ft(t[n])){r+=`[${t[n]}]`;continue}r+=`.${t[n]}`}return r}const Cr={};function _r(e){return Cr[e]}function wt(e,t,r){typeof r.value=="object"&&(r.value=E(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function E(e){if(typeof e!="object")return e;var t=0,r,n,l,o=Object.prototype.toString.call(e);if(o==="[object Object]"?l=Object.create(e.__proto__||null):o==="[object Array]"?l=Array(e.length):o==="[object Set]"?(l=new Set,e.forEach(function(f){l.add(E(f))})):o==="[object Map]"?(l=new Map,e.forEach(function(f,h){l.set(E(h),E(f))})):o==="[object Date]"?l=new Date(+e):o==="[object RegExp]"?l=new RegExp(e.source,e.flags):o==="[object DataView]"?l=new e.constructor(E(e.buffer)):o==="[object ArrayBuffer]"?l=e.slice(0):o.slice(-6)==="Array]"&&(l=new e.constructor(e)),l){for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)wt(l,n[t],Object.getOwnPropertyDescriptor(e,n[t]));for(t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++)Object.hasOwnProperty.call(l,r=n[t])&&l[r]===e[r]||wt(l,r,Object.getOwnPropertyDescriptor(e,r))}return l||e}const Rt=Symbol("vee-validate-form"),Pr=typeof window<"u";function Fr(e){return x(e)&&!!e.__locatorRef}function fe(e){return!!e&&x(e.parse)&&e.__type==="VVTypedSchema"}function $t(e){return!!e&&x(e.validate)}function Nr(e){return e==="checkbox"||e==="radio"}function kr(e){return Ce(e)||Array.isArray(e)}function Tr(e){return Array.isArray(e)?e.length===0:Ce(e)&&Object.keys(e).length===0}function Ke(e){return/^\[.+\]$/i.test(e)}function Mr(e){return Ut(e)&&e.multiple}function Ut(e){return e.tagName==="SELECT"}function Rr(e){return zt(e)&&e.target&&"submit"in e.target}function zt(e){return e?!!(typeof Event<"u"&&x(Event)&&e instanceof Event||e&&e.srcElement):!1}function ve(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,l;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!ve(e[n],t[n]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(n of e.entries())if(!t.has(n[0]))return!1;for(n of e.entries())if(!ve(n[1],t.get(n[0])))return!1;return!0}if(Et(e)&&Et(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(n of e.entries())if(!t.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();for(l=Object.keys(e),r=l.length,n=r;n--!==0;){var o=l[n];if(!ve(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function Et(e){return Pr?e instanceof File:!1}function vt(e){return Ke(e)?e.replace(/\[|\]/gi,""):e}function R(e,t,r){return e?Ke(t)?e[vt(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((l,o)=>kr(l)&&o in l?l[o]:r,e):r}function $(e,t,r){if(Ke(t)){e[vt(t)]=r;return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let o=0;o<n.length;o++){if(o===n.length-1){l[n[o]]=r;return}(!(n[o]in l)||Ie(l[n[o]]))&&(l[n[o]]=ft(n[o+1])?[]:{}),l=l[n[o]]}}function ot(e,t){if(Array.isArray(e)&&ft(t)){e.splice(Number(t),1);return}Ce(e)&&delete e[t]}function jt(e,t){if(Ke(t)){delete e[vt(t)];return}const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let o=0;o<r.length;o++){if(o===r.length-1){ot(n,r[o]);break}if(!(r[o]in n)||Ie(n[r[o]]))break;n=n[r[o]]}const l=r.map((o,f)=>R(e,r.slice(0,f).join(".")));for(let o=l.length-1;o>=0;o--)if(Tr(l[o])){if(o===0){ot(e,r[0]);continue}ot(l[o-1],r[o-1])}}function H(e){return Object.keys(e)}function $r(e,t=void 0){const r=mr();return(r==null?void 0:r.provides[e])||dr(e,t)}function It(e,t=0){let r=null,n=[];return function(...l){return r&&clearTimeout(r),r=setTimeout(()=>{const o=e(...l);n.forEach(f=>f(o)),n=[]},t),new Promise(o=>n.push(o))}}function Ur(e,t){let r;return async function(...l){const o=e(...l);r=o;const f=await o;return o!==r?f:(r=void 0,t(f,l))}}function zr({get:e,set:t}){const r=X(E(e()));return ee(e,n=>{ve(n,r.value)||(r.value=E(n))},{deep:!0}),ee(r,n=>{ve(n,e())||t(E(n))},{deep:!0}),r}function Ct(e){return Array.isArray(e)?e:e?[e]:[]}function Be(e,t){const r={};for(const n in e)t.includes(n)||(r[n]=e[n]);return r}function Br(e){let t=null,r=[];return function(...n){const l=se(()=>{if(t!==l)return;const o=e(...n);r.forEach(f=>f(o)),r=[],t=null});return t=l,new Promise(o=>r.push(o))}}function lt(e){if(Bt(e))return e._value}function Bt(e){return"_value"in e}function Dr(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function _t(e){if(!zt(e))return e;const t=e.target;if(Nr(t.type)&&Bt(t))return lt(t);if(t.type==="file"&&t.files){const r=Array.from(t.files);return t.multiple?r:r[0]}if(Mr(t))return Array.from(t.options).filter(r=>r.selected&&!r.disabled).map(lt);if(Ut(t)){const r=Array.from(t.options).find(n=>n.selected);return r?lt(r):t.value}return Dr(t)}function Lr(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?Ce(e)&&e._$$isNormalized?e:Ce(e)?Object.keys(e).reduce((r,n)=>{const l=qr(e[n]);return e[n]!==!1&&(r[n]=Pt(l)),r},t):typeof e!="string"?t:e.split("|").reduce((r,n)=>{const l=Wr(n);return l.name&&(r[l.name]=Pt(l.params)),r},t):t}function qr(e){return e===!0?[]:Array.isArray(e)||Ce(e)?e:[e]}function Pt(e){const t=r=>typeof r=="string"&&r[0]==="@"?Kr(r.slice(1)):r;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((r,n)=>(r[n]=t(e[n]),r),{})}const Wr=e=>{let t=[];const r=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:r,params:t}};function Kr(e){const t=r=>R(r,e)||r[e];return t.__locatorRef=e,t}const Gr={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Hr=Object.assign({},Gr);const Ne=()=>Hr;async function Xr(e,t,r={}){const n=r==null?void 0:r.bails,l={name:(r==null?void 0:r.name)||"{field}",rules:t,label:r==null?void 0:r.label,bails:n??!0,formData:(r==null?void 0:r.values)||{}},o=await Yr(l,e);return Object.assign(Object.assign({},o),{valid:!o.errors.length})}async function Yr(e,t){const r=e.rules;if(fe(r)||$t(r))return Jr(t,Object.assign(Object.assign({},e),{rules:r}));if(x(r)||Array.isArray(r)){const h={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},u=Array.isArray(r)?r:[r],c=u.length,O=[];for(let A=0;A<c;A++){const N=u[A],C=await N(t,h);if(!(typeof C!="string"&&!Array.isArray(C)&&C)){if(Array.isArray(C))O.push(...C);else{const te=typeof C=="string"?C:Lt(h);O.push(te)}if(e.bails)return{errors:O}}}return{errors:O}}const n=Object.assign(Object.assign({},e),{rules:Lr(r)}),l=[],o=Object.keys(n.rules),f=o.length;for(let h=0;h<f;h++){const u=o[h],c=await Zr(n,t,{name:u,params:n.rules[u]});if(c.error&&(l.push(c.error),e.bails))return{errors:l}}return{errors:l}}function Qr(e){return!!e&&e.name==="ValidationError"}function Dt(e){return{__type:"VVTypedSchema",async parse(r,n){var l;try{return{output:await e.validate(r,{abortEarly:!1,context:(n==null?void 0:n.formData)||{}}),errors:[]}}catch(o){if(!Qr(o))throw o;if(!(!((l=o.inner)===null||l===void 0)&&l.length)&&o.errors.length)return{errors:[{path:o.path,errors:o.errors}]};const f=o.inner.reduce((h,u)=>{const c=u.path||"";return h[c]||(h[c]={errors:[],path:c}),h[c].errors.push(...u.errors),h},{});return{errors:Object.values(f)}}}}}async function Jr(e,t){const n=await(fe(t.rules)?t.rules:Dt(t.rules)).parse(e,{formData:t.formData}),l=[];for(const o of n.errors)o.errors.length&&l.push(...o.errors);return{value:n.value,errors:l}}async function Zr(e,t,r){const n=_r(r.name);if(!n)throw new Error(`No such validator '${r.name}' exists.`);const l=xr(r.params,e.formData),o={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},r),{params:l})},f=await n(t,l,o);return typeof f=="string"?{error:f}:{error:f?void 0:Lt(o)}}function Lt(e){const t=Ne().generateMessage;return t?t(e):"Field is invalid"}function xr(e,t){const r=n=>Fr(n)?n(t):n;return Array.isArray(e)?e.map(r):Object.keys(e).reduce((n,l)=>(n[l]=r(e[l]),n),{})}async function en(e,t){const n=await(fe(e)?e:Dt(e)).parse(E(t)),l={},o={};for(const f of n.errors){const h=f.errors,u=(f.path||"").replace(/\["(\d+)"\]/g,(c,O)=>`[${O}]`);l[u]={valid:!h.length,errors:h},h.length&&(o[u]=h[0])}return{valid:!n.errors.length,results:l,errors:o,values:n.value,source:"schema"}}async function tn(e,t,r){const l=H(e).map(async c=>{var O,A,N;const C=(O=r==null?void 0:r.names)===null||O===void 0?void 0:O[c],K=await Xr(R(t,c),e[c],{name:(C==null?void 0:C.name)||c,label:C==null?void 0:C.label,values:t,bails:(N=(A=r==null?void 0:r.bailsMap)===null||A===void 0?void 0:A[c])!==null&&N!==void 0?N:!0});return Object.assign(Object.assign({},K),{path:c})});let o=!0;const f=await Promise.all(l),h={},u={};for(const c of f)h[c.path]={valid:c.valid,errors:c.errors},c.valid||(o=!1,u[c.path]=c.errors[0]);return{valid:o,results:h,errors:u,source:"schema"}}let rn=0;const De=["bails","fieldsCount","id","multiple","type","validate"];function qt(e){const t=(e==null?void 0:e.initialValues)||{},r=Object.assign({},I(t)),n=ie(e==null?void 0:e.validationSchema);return n&&fe(n)&&x(n.cast)?E(n.cast(r)||{}):E(r)}function nn(e){var t;const r=rn++;let n=0;const l=X(!1),o=X(!1),f=X(0),h=[],u=qe(qt(e)),c=X([]),O=X({}),A=X({}),N=Br(()=>{A.value=c.value.reduce((i,s)=>(i[ze(I(s.path))]=s,i),{})});function C(i,s){const a=U(i);if(!a){typeof i=="string"&&(O.value[ze(i)]=Ct(s));return}if(typeof i=="string"){const d=ze(i);O.value[d]&&delete O.value[d]}a.errors=Ct(s),a.valid=!a.errors.length}function K(i){H(i).forEach(s=>{C(s,i[s])})}e!=null&&e.initialErrors&&K(e.initialErrors);const te=D(()=>{const i=c.value.reduce((s,a)=>(a.errors.length&&(s[a.path]=a.errors),s),{});return Object.assign(Object.assign({},O.value),i)}),me=D(()=>H(te.value).reduce((i,s)=>{const a=te.value[s];return a!=null&&a.length&&(i[s]=a[0]),i},{})),ge=D(()=>c.value.reduce((i,s)=>(i[s.path]={name:s.path||"",label:s.label||""},i),{})),_e=D(()=>c.value.reduce((i,s)=>{var a;return i[s.path]=(a=s.bails)!==null&&a!==void 0?a:!0,i},{})),ye=Object.assign({},(e==null?void 0:e.initialErrors)||{}),be=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:v,originalInitialValues:m,setInitialValues:V}=on(c,u,e),w=sn(c,u,m,me),j=D(()=>c.value.reduce((i,s)=>{const a=R(u,s.path);return $(i,s.path,a),i},{})),S=e==null?void 0:e.validationSchema;function M(i,s){var a,d;const g=D(()=>R(v.value,I(i))),b=A.value[I(i)],p=(s==null?void 0:s.type)==="checkbox"||(s==null?void 0:s.type)==="radio";if(b&&p){b.multiple=!0;const G=n++;return Array.isArray(b.id)?b.id.push(G):b.id=[b.id,G],b.fieldsCount++,b.__flags.pendingUnmount[G]=!1,b}const P=D(()=>R(u,I(i))),T=I(i),z=ae.findIndex(G=>G===T);z!==-1&&ae.splice(z,1);const _=D(()=>{var G,Pe,et,tt;const rt=I(S);if(fe(rt))return(Pe=(G=rt.describe)===null||G===void 0?void 0:G.call(rt,I(i)).required)!==null&&Pe!==void 0?Pe:!1;const nt=I(s==null?void 0:s.schema);return fe(nt)&&(tt=(et=nt.describe)===null||et===void 0?void 0:et.call(nt).required)!==null&&tt!==void 0?tt:!1}),B=n++,L=qe({id:B,path:i,touched:!1,pending:!1,valid:!0,validated:!!(!((a=ye[T])===null||a===void 0)&&a.length),required:_,initialValue:g,errors:fr([]),bails:(d=s==null?void 0:s.bails)!==null&&d!==void 0?d:!1,label:s==null?void 0:s.label,type:(s==null?void 0:s.type)||"default",value:P,multiple:!1,__flags:{pendingUnmount:{[B]:!1},pendingReset:!1},fieldsCount:1,validate:s==null?void 0:s.validate,dirty:D(()=>!ve(ie(P),ie(g)))});return c.value.push(L),A.value[T]=L,N(),me.value[T]&&!ye[T]&&se(()=>{he(T,{mode:"silent"})}),bt(i)&&ee(i,G=>{N();const Pe=E(P.value);A.value[G]=L,se(()=>{$(u,G,Pe)})}),L}const Y=It(ht,5),Ge=It(ht,5),Oe=Ur(async i=>await(i==="silent"?Y():Ge()),(i,[s])=>{const a=H(W.errorBag.value),g=[...new Set([...H(i.results),...c.value.map(b=>b.path),...a])].sort().reduce((b,p)=>{var P;const T=p,z=U(T)||re(T),_=((P=i.results[T])===null||P===void 0?void 0:P.errors)||[],B=I(z==null?void 0:z.path)||T,L=ln({errors:_,valid:!_.length},b.results[B]);return b.results[B]=L,L.valid||(b.errors[B]=L.errors[0]),z&&O.value[B]&&delete O.value[B],z?(z.valid=L.valid,s==="silent"||s==="validated-only"&&!z.validated||C(z,L.errors),b):(C(B,_),b)},{valid:i.valid,results:{},errors:{},source:i.source});return i.values&&(g.values=i.values,g.source=i.source),H(g.results).forEach(b=>{var p;const P=U(b);P&&s!=="silent"&&(s==="validated-only"&&!P.validated||C(P,(p=g.results[b])===null||p===void 0?void 0:p.errors))}),g});function pe(i){c.value.forEach(i)}function U(i){const s=typeof i=="string"?ze(i):i;return typeof s=="string"?A.value[s]:s}function re(i){return c.value.filter(a=>i.startsWith(a.path)).reduce((a,d)=>a?d.path.length>a.path.length?d:a:d,void 0)}let ae=[],Ve;function He(i){return ae.push(i),Ve||(Ve=se(()=>{[...ae].sort().reverse().forEach(a=>{jt(u,a)}),ae=[],Ve=null})),Ve}function Me(i){return function(a,d){return function(b){return b instanceof Event&&(b.preventDefault(),b.stopPropagation()),pe(p=>p.touched=!0),l.value=!0,f.value++,Se().then(p=>{const P=E(u);if(p.valid&&typeof a=="function"){const T=E(j.value);let z=i?T:P;return p.values&&(z=p.source==="schema"?p.values:Object.assign({},z,p.values)),a(z,{evt:b,controlledValues:T,setErrors:K,setFieldError:C,setTouched:Qe,setFieldTouched:Re,setValues:Xe,setFieldValue:ue,resetForm:Je,resetField:mt})}!p.valid&&typeof d=="function"&&d({values:P,evt:b,errors:p.errors,results:p.results})}).then(p=>(l.value=!1,p),p=>{throw l.value=!1,p})}}}const k=Me(!1);k.withControlled=Me(!0);function ne(i,s){const a=c.value.findIndex(g=>g.path===i&&(Array.isArray(g.id)?g.id.includes(s):g.id===s)),d=c.value[a];if(!(a===-1||!d)){if(se(()=>{he(i,{mode:"silent",warn:!1})}),d.multiple&&d.fieldsCount&&d.fieldsCount--,Array.isArray(d.id)){const g=d.id.indexOf(s);g>=0&&d.id.splice(g,1),delete d.__flags.pendingUnmount[s]}(!d.multiple||d.fieldsCount<=0)&&(c.value.splice(a,1),pt(i),N(),delete A.value[i])}}function Q(i){H(A.value).forEach(s=>{s.startsWith(i)&&delete A.value[s]}),c.value=c.value.filter(s=>!s.path.startsWith(i)),se(()=>{N()})}const W={formId:r,values:u,controlledValues:j,errorBag:te,errors:me,schema:S,submitCount:f,meta:w,isSubmitting:l,isValidating:o,fieldArrays:h,keepValuesOnUnmount:be,validateSchema:ie(S)?Oe:void 0,validate:Se,setFieldError:C,validateField:he,setFieldValue:ue,setValues:Xe,setErrors:K,setFieldTouched:Re,setTouched:Qe,resetForm:Je,resetField:mt,handleSubmit:k,useFieldModel:Jt,defineInputBinds:Zt,defineComponentBinds:xt,defineField:xe,stageInitialValue:Yt,unsetInitialValue:pt,setFieldInitialValue:Ze,createPathState:M,getPathState:U,unsetPathValue:He,removePathState:ne,initialValues:v,getAllPathStates:()=>c.value,destroyPath:Q,isFieldTouched:Gt,isFieldDirty:Ht,isFieldValid:Xt};function ue(i,s,a=!0){const d=E(s),g=typeof i=="string"?i:i.path;U(g)||M(g),$(u,g,d),a&&he(g)}function Kt(i,s=!0){H(u).forEach(a=>{delete u[a]}),H(i).forEach(a=>{ue(a,i[a],!1)}),s&&Se()}function Xe(i,s=!0){Te(u,i),h.forEach(a=>a&&a.reset()),s&&Se()}function Ye(i,s){const a=U(I(i))||M(i);return D({get(){return a.value},set(d){var g;const b=I(i);ue(b,d,(g=I(s))!==null&&g!==void 0?g:!1)}})}function Re(i,s){const a=U(i);a&&(a.touched=s)}function Gt(i){const s=U(i);return s?s.touched:c.value.filter(a=>a.path.startsWith(i)).some(a=>a.touched)}function Ht(i){const s=U(i);return s?s.dirty:c.value.filter(a=>a.path.startsWith(i)).some(a=>a.dirty)}function Xt(i){const s=U(i);return s?s.valid:c.value.filter(a=>a.path.startsWith(i)).every(a=>a.valid)}function Qe(i){if(typeof i=="boolean"){pe(s=>{s.touched=i});return}H(i).forEach(s=>{Re(s,!!i[s])})}function mt(i,s){var a;const d=s&&"value"in s?s.value:R(v.value,i),g=U(i);g&&(g.__flags.pendingReset=!0),Ze(i,E(d),!0),ue(i,d,!1),Re(i,(a=s==null?void 0:s.touched)!==null&&a!==void 0?a:!1),C(i,(s==null?void 0:s.errors)||[]),se(()=>{g&&(g.__flags.pendingReset=!1)})}function Je(i,s){let a=E(i!=null&&i.values?i.values:m.value);a=s!=null&&s.force?a:Te(m.value,a),a=fe(S)&&x(S.cast)?S.cast(a):a,V(a,{force:s==null?void 0:s.force}),pe(d=>{var g;d.__flags.pendingReset=!0,d.validated=!1,d.touched=((g=i==null?void 0:i.touched)===null||g===void 0?void 0:g[d.path])||!1,ue(d.path,R(a,d.path),!1),C(d.path,void 0)}),s!=null&&s.force?Kt(a,!1):Xe(a,!1),K((i==null?void 0:i.errors)||{}),f.value=(i==null?void 0:i.submitCount)||0,se(()=>{Se({mode:"silent"}),pe(d=>{d.__flags.pendingReset=!1})})}async function Se(i){const s=(i==null?void 0:i.mode)||"force";if(s==="force"&&pe(p=>p.validated=!0),W.validateSchema)return W.validateSchema(s);o.value=!0;const a=await Promise.all(c.value.map(p=>p.validate?p.validate(i).then(P=>({key:p.path,valid:P.valid,errors:P.errors,value:P.value})):Promise.resolve({key:p.path,valid:!0,errors:[],value:void 0})));o.value=!1;const d={},g={},b={};for(const p of a)d[p.key]={valid:p.valid,errors:p.errors},p.value&&$(b,p.key,p.value),p.errors.length&&(g[p.key]=p.errors[0]);return{valid:a.every(p=>p.valid),results:d,errors:g,values:b,source:"fields"}}async function he(i,s){var a;const d=U(i);if(d&&(s==null?void 0:s.mode)!=="silent"&&(d.validated=!0),S){const{results:g}=await Oe((s==null?void 0:s.mode)||"validated-only");return g[i]||{errors:[],valid:!0}}return d!=null&&d.validate?d.validate(s):(!d&&(a=s==null?void 0:s.warn),Promise.resolve({errors:[],valid:!0}))}function pt(i){jt(v.value,i)}function Yt(i,s,a=!1){Ze(i,s),$(u,i,s),a&&!(e!=null&&e.initialValues)&&$(m.value,i,E(s))}function Ze(i,s,a=!1){$(v.value,i,E(s)),a&&$(m.value,i,E(s))}async function ht(){const i=ie(S);if(!i)return{valid:!0,results:{},errors:{},source:"none"};o.value=!0;const s=$t(i)||fe(i)?await en(i,u):await tn(i,u,{names:ge.value,bailsMap:_e.value});return o.value=!1,s}const Qt=k((i,{evt:s})=>{Rr(s)&&s.target.submit()});ur(()=>{if(e!=null&&e.initialErrors&&K(e.initialErrors),e!=null&&e.initialTouched&&Qe(e.initialTouched),e!=null&&e.validateOnMount){Se();return}W.validateSchema&&W.validateSchema("silent")}),bt(S)&&ee(S,()=>{var i;(i=W.validateSchema)===null||i===void 0||i.call(W,"validated-only")}),vr(Rt,W);function xe(i,s){const a=x(s)||s==null?void 0:s.label,d=U(I(i))||M(i,{label:a}),g=()=>x(s)?s(Be(d,De)):s||{};function b(){var _;d.touched=!0,((_=g().validateOnBlur)!==null&&_!==void 0?_:Ne().validateOnBlur)&&he(d.path)}function p(){var _;((_=g().validateOnInput)!==null&&_!==void 0?_:Ne().validateOnInput)&&se(()=>{he(d.path)})}function P(){var _;((_=g().validateOnChange)!==null&&_!==void 0?_:Ne().validateOnChange)&&se(()=>{he(d.path)})}const T=D(()=>{const _={onChange:P,onInput:p,onBlur:b};return x(s)?Object.assign(Object.assign({},_),s(Be(d,De)).props||{}):s!=null&&s.props?Object.assign(Object.assign({},_),s.props(Be(d,De))):_});return[Ye(i,()=>{var _,B,L;return(L=(_=g().validateOnModelUpdate)!==null&&_!==void 0?_:(B=Ne())===null||B===void 0?void 0:B.validateOnModelUpdate)!==null&&L!==void 0?L:!0}),T]}function Jt(i){return Array.isArray(i)?i.map(s=>Ye(s,!0)):Ye(i)}function Zt(i,s){const[a,d]=xe(i,s);function g(){d.value.onBlur()}function b(P){const T=_t(P);ue(I(i),T,!1),d.value.onInput()}function p(P){const T=_t(P);ue(I(i),T,!1),d.value.onChange()}return D(()=>Object.assign(Object.assign({},d.value),{onBlur:g,onInput:b,onChange:p,value:a.value}))}function xt(i,s){const[a,d]=xe(i,s),g=U(I(i));function b(p){a.value=p}return D(()=>{const p=x(s)?s(Be(g,De)):s||{};return Object.assign({[p.model||"modelValue"]:a.value,[`onUpdate:${p.model||"modelValue"}`]:b},d.value)})}return Object.assign(Object.assign({},W),{values:kt(u),handleReset:()=>Je(),submitForm:Qt})}function sn(e,t,r,n){const l={touched:"some",pending:"some",valid:"every"},o=D(()=>!ve(t,ie(r)));function f(){const u=e.value;return H(l).reduce((c,O)=>{const A=l[O];return c[O]=u[A](N=>N[O]),c},{})}const h=qe(f());return Tt(()=>{const u=f();h.touched=u.touched,h.valid=u.valid,h.pending=u.pending}),D(()=>Object.assign(Object.assign({initialValues:ie(r)},h),{valid:h.valid&&!H(n.value).length,dirty:o.value}))}function on(e,t,r){const n=qt(r),l=X(n),o=X(E(n));function f(h,u){u!=null&&u.force?(l.value=E(h),o.value=E(h)):(l.value=Te(E(l.value)||{},E(h)),o.value=Te(E(o.value)||{},E(h))),u!=null&&u.updateFields&&e.value.forEach(c=>{if(c.touched)return;const A=R(l.value,c.path);$(t,c.path,E(A))})}return{initialValues:l,originalInitialValues:o,setInitialValues:f}}function ln(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}function Ft(e){const t=$r(Rt,void 0),r=X([]),n=()=>{},l={fields:r,remove:n,push:n,swap:n,insert:n,update:n,replace:n,prepend:n,move:n};if(!t||!ie(e))return l;const o=t.fieldArrays.find(v=>ie(v.path)===ie(e));if(o)return o;let f=0;function h(){return R(t==null?void 0:t.values,I(e),[])||[]}function u(){const v=h();Array.isArray(v)&&(r.value=v.map((m,V)=>O(m,V,r.value)),c())}u();function c(){const v=r.value.length;for(let m=0;m<v;m++){const V=r.value[m];V.isFirst=m===0,V.isLast=m===v-1}}function O(v,m,V){if(V&&!Ie(m)&&V[m])return V[m];const w=f++;return{key:w,value:zr({get(){const S=R(t==null?void 0:t.values,I(e),[])||[],M=r.value.findIndex(Y=>Y.key===w);return M===-1?v:S[M]},set(S){const M=r.value.findIndex(Y=>Y.key===w);M!==-1&&ge(M,S)}}),isFirst:!1,isLast:!1}}function A(){c(),t==null||t.validate({mode:"silent"})}function N(v){const m=I(e),V=R(t==null?void 0:t.values,m);if(!V||!Array.isArray(V))return;const w=[...V];w.splice(v,1);const j=m+`[${v}]`;t.destroyPath(j),t.unsetInitialValue(j),$(t.values,m,w),r.value.splice(v,1),A()}function C(v){const m=E(v),V=I(e),w=R(t==null?void 0:t.values,V),j=Ie(w)?[]:w;if(!Array.isArray(j))return;const S=[...j];S.push(m),t.stageInitialValue(V+`[${S.length-1}]`,m),$(t.values,V,S),r.value.push(O(m)),A()}function K(v,m){const V=I(e),w=R(t==null?void 0:t.values,V);if(!Array.isArray(w)||!(v in w)||!(m in w))return;const j=[...w],S=[...r.value],M=j[v];j[v]=j[m],j[m]=M;const Y=S[v];S[v]=S[m],S[m]=Y,$(t.values,V,j),r.value=S,c()}function te(v,m){const V=E(m),w=I(e),j=R(t==null?void 0:t.values,w);if(!Array.isArray(j)||j.length<v)return;const S=[...j],M=[...r.value];S.splice(v,0,V),M.splice(v,0,O(V)),$(t.values,w,S),r.value=M,A()}function me(v){const m=I(e);t.stageInitialValue(m,v),$(t.values,m,v),u(),A()}function ge(v,m){const V=I(e),w=R(t==null?void 0:t.values,V);!Array.isArray(w)||w.length-1<v||($(t.values,`${V}[${v}]`,m),t==null||t.validate({mode:"validated-only"}))}function _e(v){const m=E(v),V=I(e),w=R(t==null?void 0:t.values,V),j=Ie(w)?[]:w;if(!Array.isArray(j))return;const S=[m,...j];$(t.values,V,S),t.stageInitialValue(V+"[0]",m),r.value.unshift(O(m)),A()}function ye(v,m){const V=I(e),w=R(t==null?void 0:t.values,V),j=Ie(w)?[]:[...w];if(!Array.isArray(w)||!(v in w)||!(m in w))return;const S=[...r.value],M=S[v];S.splice(v,1),S.splice(m,0,M);const Y=j[v];j.splice(v,1),j.splice(m,0,Y),$(t.values,V,j),r.value=S,A()}const be={fields:r,remove:N,push:C,swap:K,insert:te,update:ge,replace:me,prepend:_e,move:ye};return t.fieldArrays.push(Object.assign({path:e,reset:u},be)),cr(()=>{const v=t.fieldArrays.findIndex(m=>I(m.path)===I(e));v>=0&&t.fieldArrays.splice(v,1)}),ee(h,v=>{const m=r.value.map(V=>V.value);ve(v,m)||u()}),be}const an=async e=>{if(e==="create")return{id:"",title:"",slug:"",description:"",price:"",stock:0,images:[],tags:[],sizes:[],gender:"",user:{}};try{const{data:t}=await We.get(`products/${e}`);return console.log(t),{...t,images:t.images.map(Sr)}}catch(t){throw console.error(t),new Error("error")}},un=async e=>{const t=e.id,r=await vn(e.images??[]);return e.images=r,e=cn(e),t&&t!==""?await dn(t,e):await fn(e)},cn=e=>{var r;const t=((r=e.images)==null?void 0:r.map(n=>n.startsWith("http")?n.split("/").pop()?n:"":n))??[];return delete e.id,delete e.user,e.images=t,e},dn=async(e,t)=>{try{const{data:r}=await We.patch(`/products/${e}`,t);return r}catch(r){throw console.log(r),new Error("Error updating product")}},fn=async e=>{try{const{data:t}=await We.post("/products",e);return t}catch(t){throw console.log(t),new Error("Error creating product")}},vn=async e=>{const t=e.filter(o=>o instanceof File),r=e.filter(o=>typeof o=="string"),n=t.map(async o=>{try{const f=new FormData;f.append("file",o);const{data:h}=await We.post("/files/product",f);return h.secureUrl}catch(f){throw console.log(f),new Error("Error uploading image")}}),l=await Promise.all(n);return[...r,...l]},mn=["type","value"],pn={key:0,class:"text-red-400"},hn=ut({__name:"CustomImput",props:{modelValue:{},error:{},type:{default:"text"}},emits:["update:modelValue","blur"],setup(e){return(t,r)=>(Z(),J("div",null,[y("input",{type:t.type,value:t.modelValue,onInput:r[0]||(r[0]=n=>{var l;return t.$emit("update:modelValue",((l=n.target)==null?void 0:l.value)??"")}),onBlur:r[1]||(r[1]=n=>t.$emit("blur")),class:ct(["form-control",{"border-red-500":t.error}])},null,42,mn),t.error?(Z(),J("span",pn,ke(t.error),1)):Mt("",!0)]))}}),gn=dt(hn,[["__scopeId","data-v-ee928cdf"]]),yn=["type","value"],bn={key:0,class:"text-red-500 font-light text-sm capitalize"},On=ut({__name:"CustomTextArea",props:{modelValue:{},error:{},type:{}},emits:["update:modelValue","blur"],setup(e){return(t,r)=>(Z(),J("div",null,[y("textarea",{type:t.type,value:t.modelValue,onInput:r[0]||(r[0]=n=>{var l;return t.$emit("update:modelValue",((l=n.target)==null?void 0:l.value)??"")}),onBlur:r[1]||(r[1]=n=>t.$emit("blur")),class:ct(["form-control",{"border-red-500":t.error}])},null,42,yn),t.error?(Z(),J("span",bn,ke(t.error),1)):Mt("",!0)]))}}),Vn=dt(On,[["__scopeId","data-v-c6aeaca0"]]),Sn=hr({title:$e().required("Este campo es super importante").min(3,"Mínimo de 3 letras!!!"),slug:$e().required(),description:$e().required(),price:Ot().required(),stock:Ot().required().min(1),gender:$e().required().oneOf(["men","women","kid"])}),An=ut({components:{CustomInput:gn,CustomTextArea:Vn},props:{productId:{type:String,required:!0}},setup(e){const t=pr(),r=gr(),{data:n,isError:l,isLoading:o,refetch:f}=Ar({queryKey:["product",e.productId],queryFn:()=>an(e.productId),retry:!1}),{mutate:h,isPending:u,isSuccess:c,data:O}=Er({mutationFn:un}),{values:A,defineField:N,errors:C,handleSubmit:K,resetForm:te,meta:me}=nn({validationSchema:Sn}),[ge,_e]=N("title"),[ye,be]=N("slug"),[v,m]=N("description"),[V,w]=N("price"),[j,S]=N("stock"),[M,Y]=N("gender"),{fields:Ge}=Ft("images"),{fields:Oe,remove:pe,push:U}=Ft("sizes"),re=X([]),ae=X(),Ve=K(async k=>{const ne={...k,images:[...k.images,...re.value]};h(ne),re.value=[]}),He=k=>{const ne=Oe.value.map(W=>W.value);ne.includes(k)?pe(ne.indexOf(k)):U(k)};Tt(()=>{if(l.value&&!o.value){r.replace("/admin/products");return}}),ee(n,()=>{n&&te({values:n.value})},{deep:!0,immediate:!0}),ee(c,k=>{k&&(t.success("El producto ha sido actualizado correctamente"),r.replace(`/admin/products/${O.value.id}`),te({values:O.value}))}),ee(()=>e.productId,()=>{f()});const Me=k=>{re.value=re.value.filter(ne=>k!==ne.name),ae.value.value=""};return ee(()=>re.value,()=>{}),{values:A,errors:C,meta:me,title:ge,titleAttrs:_e,slug:ye,slugAttrs:be,description:v,descriptionAttrs:m,price:V,priceAttrs:w,stock:j,stockAttrs:S,gender:M,genderAttrs:Y,isPending:u,sizes:Oe,images:Ge,imageFiles:re,onFileChange:k=>{const Q=k.target.files;if(console.log(Q==null?void 0:Q.length),!!Q&&Q.length!==0){for(const W of Q)re.value.push(W);console.log({imagesFromOnFileChange:re.value})}},fileInputRef:ae,allSizes:["XS","S","M","L","XL","XXL"],onSubmit:Ve,toggleSize:He,hasSize:k=>Oe.value.map(Q=>Q.value).includes(k),temporalImagePath:k=>URL.createObjectURL(k),removeImage:Me}}}),wn={class:"bg-white px-5 py-2 rounded"},En={class:"text-3xl"},jn={class:"text-blue-500"},In={class:"first-col"},Cn={class:"mb-4"},_n={class:"mb-4"},Pn={class:"mb-4"},Fn={class:"flex flex-row gap-3"},Nn={class:"mb-4 flex-1"},kn={class:"mb-4 flex-1"},Tn={class:"mb-4"},Mn={class:"flex"},Rn=["onClick"],$n={class:"first-col"},Un={class:"flex p-2 overflow-x-auto space-x-8 w-full h-[265px] bg-gray-200 rounded"},zn=["src","alt"],Bn={class:"text-center"},Dn=["onClick"],Ln=["src","alt"],qn={class:"col-span-2 my-2"},Wn={class:"mb-4"},Kn={class:"my-4 text-right"},Gn=["disabled"];function Hn(e,t,r,n,l,o){const f=St("CustomInput"),h=St("CustomTextArea");return Z(),J(Ue,null,[y("div",wn,[y("h1",En,[t[8]||(t[8]=yr(" Producto: ")),y("small",jn,ke(e.title),1)]),t[9]||(t[9]=y("hr",{class:"my-4"},null,-1))]),y("form",{onSubmit:t[7]||(t[7]=(...u)=>e.onSubmit&&e.onSubmit(...u)),class:"grid grid-cols-1 sm:grid-cols-2 bg-white px-5 gap-5"},[y("div",In,[y("div",Cn,[t[10]||(t[10]=y("label",{for:"title",class:"form-label"},"Título",-1)),Fe(f,je({modelValue:e.title,"onUpdate:modelValue":t[0]||(t[0]=u=>e.title=u)},e.titleAttrs,{error:e.errors.title}),null,16,["modelValue","error"])]),y("div",_n,[t[11]||(t[11]=y("label",{for:"slug",class:"form-label"},"Slug",-1)),Fe(f,je({modelValue:e.slug,"onUpdate:modelValue":t[1]||(t[1]=u=>e.slug=u)},e.slugAttrs,{error:e.errors.slug}),null,16,["modelValue","error"])]),y("div",Pn,[t[12]||(t[12]=y("label",{for:"description",class:"form-label"},"Descripción",-1)),Fe(h,je({modelValue:e.description,"onUpdate:modelValue":t[2]||(t[2]=u=>e.description=u)},e.descriptionAttrs,{error:e.errors.description}),null,16,["modelValue","error"])]),y("div",Fn,[y("div",Nn,[t[13]||(t[13]=y("label",{for:"price",class:"form-label"},"Precio",-1)),Fe(f,je({modelValue:e.price,"onUpdate:modelValue":t[3]||(t[3]=u=>e.price=u),modelModifiers:{number:!0}},e.priceAttrs,{error:e.errors.price}),null,16,["modelValue","error"])]),y("div",kn,[t[14]||(t[14]=y("label",{for:"stock",class:"form-label"},"Inventario",-1)),Fe(f,je({modelValue:e.stock,"onUpdate:modelValue":t[4]||(t[4]=u=>e.stock=u),modelModifiers:{number:!0}},e.stockAttrs,{error:e.errors.stock}),null,16,["modelValue","error"])])]),y("div",Tn,[t[15]||(t[15]=y("label",{for:"sizes",class:"form-label"},"Tallas",-1)),y("div",Mn,[(Z(!0),J(Ue,null,it(e.allSizes,u=>(Z(),J("button",{key:u,onClick:c=>e.toggleSize(u),type:"button",class:ct(["p-2 rounded w-14 mr-2 flex-1",{"bg-blue-500 text-white":e.hasSize(u),"bg-gray-300 text-white":!e.hasSize(u)}])},ke(u),11,Rn))),128))])])]),y("div",$n,[t[19]||(t[19]=y("label",{for:"stock",class:"form-label"},"Imágenes",-1)),y("div",Un,[(Z(!0),J(Ue,null,it(e.images,u=>(Z(),J("div",{key:u.value,class:"flex-shrink-0"},[y("img",{src:u.value,alt:e.title,class:"w-[250px] h-[250px] rounded"},null,8,zn)]))),128)),(Z(!0),J(Ue,null,it(e.imageFiles,u=>(Z(),J("div",{key:u.name,class:"flex-shrink-0"},[y("div",Bn,[y("button",{class:"bg-blue-500 hover:bg-blue-400 text-white p-2 rounded-md",type:"button",onClick:c=>e.removeImage(u.name)}," Borrar imagen ",8,Dn),y("img",{src:e.temporalImagePath(u),alt:e.title,class:"w-[250px] h-[250px] rounded"},null,8,Ln)])]))),128))]),y("div",qn,[t[16]||(t[16]=y("label",{for:"image",class:"form-label"},"Subir imagen",-1)),y("input",{multiple:"",type:"file",accept:"image/*",id:"image",class:"form-control",onChange:t[5]||(t[5]=(...u)=>e.onFileChange&&e.onFileChange(...u)),ref:"fileInputRef"},null,544)]),y("div",Wn,[t[18]||(t[18]=y("label",{for:"stock",class:"form-label"},"Género",-1)),Vt(y("select",je({"onUpdate:modelValue":t[6]||(t[6]=u=>e.gender=u)},e.genderAttrs,{class:"form-control"}),t[17]||(t[17]=[y("option",{value:""},"Seleccione",-1),y("option",{value:"kid"},"Niño",-1),y("option",{value:"women"},"Mujer",-1),y("option",{value:"men"},"Hombre",-1)]),16),[[br,e.gender]]),Vt(y("span",{class:"text-red-400"},ke(e.errors.gender),513),[[Or,e.errors.gender]])]),y("div",Kn,[y("button",{type:"submit",class:"disabled:bg-gray-300 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",disabled:e.isPending}," Guardar ",8,Gn)])])],32)],64)}const Jn=dt(An,[["render",Hn],["__scopeId","data-v-fbcd6323"]]);export{Jn as default};
